{"version":3,"sources":["../../dist/src/core/Preconditions.js"],"names":["Object","defineProperty","exports","value","lodash_1","require","Errors_1","errorHandler","message","NcCheckerError","consoleHandler","logger","format","cause","isUndefined","NcError","Checker","obj","handler","predicate","checked","err","it","o","not","isNull","isBoolean","isString","isFunction","isNumber","isInteger","check","b","create","checkWarn","msg","console","warn"],"mappings":"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","file":"Preconditions.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst lodash_1 = require(\"lodash\");\nconst Errors_1 = require(\"./Errors\");\nfunction errorHandler(message) {\n    throw new NcCheckerError(message || 'Precondition not satisfy.');\n}\nfunction consoleHandler(logger) {\n    return (message) => {\n        logger(message || 'Precondition not satisfy.');\n    };\n}\nfunction format(cause, message) {\n    if (lodash_1.isUndefined(message)) {\n        return cause;\n    }\n    return `${message}. Caused by ${cause}.`;\n}\nclass NcCheckerError extends Errors_1.NcError {\n    constructor(message) {\n        super(message);\n    }\n}\nexports.NcCheckerError = NcCheckerError;\nclass Checker {\n    constructor(obj, handler = errorHandler) {\n        this.obj = obj;\n        this.handler = handler;\n    }\n    it(predicate, message) {\n        let checked;\n        try {\n            checked = predicate(this.obj);\n        }\n        catch (err) {\n            throw new NcCheckerError(`Got error while checking [${this.obj}] with predicate [${predicate}]: ${err}`);\n        }\n        if (!!!checked) {\n            this.handler(message);\n        }\n        return this;\n    }\n    not(predicate, message) {\n        return this.it((o) => !predicate(o), message);\n    }\n    notNull(message) {\n        return this\n            .not(lodash_1.isUndefined, format(`Object is undefined`, message))\n            .not(lodash_1.isNull, message);\n    }\n    isBoolean(message) {\n        return this\n            .it(lodash_1.isBoolean, format(`[${this.obj}] is not a boolean`, message));\n    }\n    isString(message) {\n        return this\n            .it(lodash_1.isString, format(`[${this.obj}] is not a string`, message));\n    }\n    isFunction(message) {\n        return this\n            .it(lodash_1.isFunction, format(`[${this.obj}] is not a function`, message));\n    }\n    isNumber(message) {\n        return this\n            .it(lodash_1.isNumber, format(`[${this.obj}] is not a number`, message));\n    }\n    isInteger(message) {\n        return this\n            .it(lodash_1.isInteger, format(`[${this.obj}] is not an integer`, message));\n    }\n    isPositive(message) {\n        return this\n            .it(lodash_1.isNumber, format(`[${this.obj}] is not a number`, message));\n    }\n}\nexports.Checker = Checker;\nfunction check(b, message) {\n    return create(b, errorHandler, message);\n}\nexports.check = check;\nfunction checkWarn(b, message) {\n    const logger = (msg) => { console.warn(msg); };\n    return create(b, consoleHandler(logger), message);\n}\nexports.checkWarn = checkWarn;\nfunction create(b, handler, message) {\n    if (!lodash_1.isUndefined(message)) {\n        if (!!!b) {\n            handler(message);\n        }\n    }\n    else {\n        return new Checker(b, handler);\n    }\n}\n//# sourceMappingURL=Preconditions.js.map"]}